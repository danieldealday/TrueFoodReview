<!DOCTYPE html>
<html>
  <head>
    <style type='text/css'>
      html, body {height: 100%; margin 0; padding: 0;}
      #map {height: 100%}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript">

// https://www.googleapis.com/fusiontables/v2/query?sql=SELECT+ROWID%2C+Product%2C+Inventory+FROM+1KxVV0wQXhxhMScSDuqr-0Ebf0YEt4m4xzVplKd4&key=AIzaSyAm9yWCV7JPCTHCJut8whOjARd7pwROFDQ

var query = {
  url: 'https://www.googleapis.com/fusiontables/v2/query?sql=',
  sql: 'SELECT+*+FROM+',
  table: '1997wo1poMe6iv7VXz1P5Dj1fkO-vud48QgNZwu1J',
  key: 'AIzaSyCWd4CkCZ2WLm1Hupxf7h0D2z3r_m7EX7U'
}

$.ajax({
  type: 'GET',
  url: query.url + query.sql + query.table + '&key=' + query.key,
  success: function(data) {
    console.log(data.rows[0]);
    data.rows.forEach(createSpot);
  },
  dataType: 'json'
});

var map;

function createSpot (array) {
  var spotCircle = new google.maps.Circle({
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 0,
    fillColor: '#FF0000',
    fillOpacity: 0.35,
    map: map,
    center: {lat: array[3], lng: array[4]},
    radius: Math.sqrt(array[2]) * 15
  });
}

function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 33.97914, lng: -118.41480705731},
    zoom: 13
  });


var layer = new google.maps.FusionTablesLayer({
    query: {
      select: "col4",
        from: "1997wo1poMe6iv7VXz1P5Dj1fkO-vud48QgNZwu1J"
    }
  });
  layer.setMap(map);
}

    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCWd4CkCZ2WLm1Hupxf7h0D2z3r_m7EX7U&callback=initMap">
    </script>
  </body>
</html>
